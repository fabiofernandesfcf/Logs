<!doctype html>
<html lang="pt-PT">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Simulador de Logs</title>
<style>
  :root{
    --bg:#0b1020;
    --panel:#071021;
    --text:#cfe8ff;
    --muted:#7ea6c8;
    --accent:#4ee28a;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071021);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text)}
  .wrap{max-width:1200px;margin:32px auto;padding:20px;display:grid;grid-template-columns:2fr 1fr;gap:20px}
  .card{
    background:linear-gradient(180deg,var(--panel),#071827);
    border-radius:10px;padding:18px;
    box-shadow:0 6px 30px rgba(2,6,14,0.6);
    border:1px solid rgba(255,255,255,0.03);
  }
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  h1{font-size:18px;margin:0;color:var(--text)}
  .sub{font-size:13px;color:var(--muted)}
  .terminal{
    background:#000814;
    border-radius:8px;padding:12px 14px;height:480px;overflow:auto;
    font-family:var(--mono);font-size:13px;line-height:1.4;color:var(--text);
    box-sizing:border-box;border:1px solid rgba(255,255,255,0.03);
  }
  .line{white-space:pre-wrap;display:block}
  .ts{color:var(--muted);margin-right:8px}
  .lvl-info{color:#7cc7ff}
  .lvl-warn{color:#ffd36b}
  .lvl-err{color:#ff7b7b}
  .controls{margin-top:12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:8px 10px;border-radius:8px;cursor:pointer}
  button.primary{background:linear-gradient(90deg,#1b5bff,#3bd6a5);color:#021018;border:none}
  .footer{font-size:12px;color:var(--muted);margin-top:10px}

  /* Estilo painel de perguntas */
  .questions h2{margin-top:0;font-size:16px;color:var(--accent)}
  .question-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:10px;max-height:520px;overflow:auto}
  .question-item{
    background:rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.06);
    border-radius:8px;
    padding:10px 12px;
    font-size:13px;
    line-height:1.4;
  }
  .question-item strong{color:var(--accent);margin-right:6px}
</style>
</head>
<body>
<div class="wrap">
  <!-- Painel de Logs -->
  <div class="card">
    <header>
      <div><h1>LOGS OCPIXPTO</h1></div>
      <div class="sub">Status: <strong id="status">Running</strong></div>
    </header>
    <div id="terminal" class="terminal" aria-live="polite"></div>
    <div class="controls">
      <button id="btnPause">Pausar</button>
      <button id="btnClear">Limpar</button>
      <button class="primary" id="btnOne">Adicionar 1 linha</button>
    </div>
    <div class="footer"></div>
  </div>

  <!-- Painel de Perguntas -->
  <div class="card questions">
    <h2>Perguntas</h2>
    <ul class="question-list">
      <li class="question-item"><strong>1.</strong> A tarifa T12 foi atualizada antes da conclusão da sessão S501.</li>
      <li class="question-item"><strong>2.</strong> A sessão S504 do usuário U206 entregou exatamente 7 kWh de energia e custou 2,45€.</li>
      <li class="question-item"><strong>3.</strong> A estação CS104 estava online e com conectores disponíveis quando a sessão S509 começou.</li>
      <li class="question-item"><strong>4.</strong> O custo da sessão S507 do usuário U209 foi maior que 4€.</li>
      <li class="question-item"><strong>5.</strong> A sessão S502 foi interrompida devido a falha de pagamento.</li>
      <li class="question-item"><strong>6.</strong> O usuário U212 completou sua sessão na estação CS105 sem alertas ou interrupções.</li>
      <li class="question-item"><strong>7.</strong> A estação CS101 estava online e tinha 4 conectores disponíveis quando a sessão do usuário U201 começou.</li>
      <li class="question-item"><strong>8.</strong> O usuário U205 conseguiu iniciar a sessão S503 na estação CS103 enquanto ela estava em manutenção.</li>
    </ul>
  </div>
</div>

<script>
const terminal = document.getElementById('terminal');
const btnPause = document.getElementById('btnPause');
const btnClear = document.getElementById('btnClear');
const btnOne = document.getElementById('btnOne');
const statusEl = document.getElementById('status');

let running = true;
let idx = 0;
let timer = null;
let speed = 1000; // fixo, 1s por linha

const sampleLogs = [
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS101, Location="Lisbon", Status=Online, AvailableConnectors=4' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U201, StationID=CS101, ConnectorID=C1, StartTime=07:55, TariffID=T10' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S501, EnergyDelivered=4.5kWh, Status=Charging' },
  { lvl: 'ERROR', msg: 'SESSION_ALERT: SessionID=S502, Status=Interrupted, Reason=PaymentFailed' },
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS102, Location="Lisbon", Status=Online, AvailableConnectors=3' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U204, StationID=CS102, ConnectorID=C1, StartTime=08:10, TariffID=T12' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S501, EnergyDelivered=5.2kWh, Status=Charging' },
  { lvl: 'ERROR', msg: 'SESSION_ALERT: SessionID=S503, Status=Interrupted, Reason=Overcurrent' },
  { lvl: 'WARN', msg: 'TARIFF_UPDATE: TariffID=T12, NewRate=0.35€/kWh' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S501, EnergyDelivered=12.5kWh, Cost=4.375€' },
  { lvl: 'WARN', msg: 'STATION_STATUS: ID=CS103, Location="Porto", Status=Maintenance, AvailableConnectors=0' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U205, StationID=CS103, ConnectorID=C2, StartTime=08:28, TariffID=T15' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S503, EnergyDelivered=8.0kWh, Cost=2.4€' },
  { lvl: 'WARN', msg: 'USER_ALERT: UserID=U205, Message="Session failed, station under maintenance"' },
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS104, Location="Lisbon", Status=Online, AvailableConnectors=2' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U206, StationID=CS104, ConnectorID=C1, StartTime=08:38, TariffID=T12' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S504, EnergyDelivered=3.5kWh, Status=Charging' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S504, EnergyDelivered=7.0kWh, Cost=2.45€' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U207, StationID=CS101, ConnectorID=C2, StartTime=08:47, TariffID=T10' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S505, EnergyDelivered=2.0kWh, Status=Charging' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S505, EnergyDelivered=6.0kWh, Cost=1.8€' },
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS105, Location="Coimbra", Status=Online, AvailableConnectors=1' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U208, StationID=CS105, ConnectorID=C1, StartTime=09:00, TariffID=T18' },
  { lvl: 'ERROR', msg: 'SESSION_ALERT: SessionID=S506, Status=Interrupted, Reason=HardwareFailure' },
  { lvl: 'WARN', msg: 'TARIFF_UPDATE: TariffID=T18, NewRate=0.40€/kWh' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S506, EnergyDelivered=3.0kWh, Cost=1.2€' },
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS102, Location="Lisbon", Status=Online, AvailableConnectors=2' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U209, StationID=CS102, ConnectorID=C2, StartTime=09:18, TariffID=T12' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S507, EnergyDelivered=4.0kWh, Status=Charging' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S507, EnergyDelivered=9.0kWh, Cost=3.15€' },
  { lvl: 'WARN', msg: 'USER_ALERT: UserID=U209, Message="Charging completed successfully"' },
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS103, Location="Porto", Status=Online, AvailableConnectors=2' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U210, StationID=CS103, ConnectorID=C1, StartTime=09:35, TariffID=T15' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S508, EnergyDelivered=5.5kWh, Status=Charging' },
  { lvl: 'INFO', msg: 'SESSION_END: SessionID=S508, EnergyDelivered=11.0kWh, Cost=3.3€' },
  { lvl: 'WARN', msg: 'STATION_STATUS: ID=CS104, Location="Lisbon", Status=Maintenance, AvailableConnectors=0' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U211, StationID=CS104, ConnectorID=C1, StartTime=09:50, TariffID=T12' },
  { lvl: 'ERROR', msg: 'SESSION_ALERT: SessionID=S509, Status=Interrupted, Reason=StationOffline' },
  { lvl: 'WARN', msg: 'USER_ALERT: UserID=U211, Message="Charging session interrupted due to maintenance"' },
  { lvl: 'INFO', msg: 'STATION_STATUS: ID=CS105, Location="Coimbra", Status=Online, AvailableConnectors=1' },
  { lvl: 'INFO', msg: 'SESSION_START: UserID=U212, StationID=CS105, ConnectorID=C1, StartTime=10:05, TariffID=T18' },
  { lvl: 'INFO', msg: 'SESSION_UPDATE: SessionID=S510, EnergyDelivered=2.5kWh, Status=Charging' },
  { lvl: 'WARN', msg: 'SESSION_END: UserID=U212, SessionID=S510, Message="Charging session interrupted due to maintenance" },
];


// timestamp
function ts() { return new Date().toLocaleString(); }

// linha formatada
function formatLine(obj) {
  const time = `<span class="ts">[${ts()}]</span>`;
  const lvlClass = obj.lvl === 'ERROR' ? 'lvl-err' : (obj.lvl === 'WARN' ? 'lvl-warn' : 'lvl-info');
  const lvl = `<span class="${lvlClass}">[${obj.lvl}]</span>`;
  return `${time}${lvl} ${obj.msg}`;
}

function appendLine(html) {
  const div = document.createElement('div');
  div.className = 'line';
  div.innerHTML = html;
  terminal.appendChild(div);
  if (terminal.children.length > 500) terminal.removeChild(terminal.children[0]);
  terminal.scrollTop = terminal.scrollHeight;
}

// function nextLog() {
//   const item = sampleLogs[idx % sampleLogs.length];
//   idx++;
//   appendLine(formatLine(item));
// }

function nextLog() {
  if (idx >= sampleLogs.length) return;
  const item = sampleLogs[idx];
  idx++;
  appendLine(formatLine(item));
}

function startLoop() {
  if (timer) clearInterval(timer);
  timer = setInterval(() => { if (running) nextLog(); }, speed);
}

btnPause.addEventListener('click', () => {
  running = !running;
  btnPause.textContent = running ? 'Pausar' : 'Retomar';
  statusEl.textContent = running ? 'Running' : 'Paused';
});
btnClear.addEventListener('click', () => { terminal.innerHTML = ''; });
btnOne.addEventListener('click', () => { nextLog(); });

// inicial
appendLine(`<span class="ts">[${ts()}]</span> <span class="lvl-info">[INFO]</span> Log ready.`);
startLoop();
</script>
</body>
</html>
